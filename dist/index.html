<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fast Market Dashboard</title>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #0f172a;
            color: #e2e8f0;
            min-height: 100vh;
            padding: 1.5rem;
        }
        
        .container { max-width: 1400px; margin: 0 auto; }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 1rem;
            border-bottom: 1px solid #334155;
            margin-bottom: 1rem;
        }
        .header-title { font-size: 1.5rem; font-weight: 600; color: #f1f5f9; }
        .header-subtitle { color: #64748b; font-size: 0.75rem; margin-top: 0.25rem; }
        .header-meta { color: #64748b; font-size: 0.7rem; text-align: right; }
        
        /* Period Selector */
        .period-selector {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        .period-selector label { color: #94a3b8; font-size: 0.8rem; }
        .period-select {
            background: #1e293b;
            border: 1px solid #334155;
            color: #e2e8f0;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 0.85rem;
            cursor: pointer;
        }
        .period-select:focus { outline: none; border-color: #3b82f6; }
        
        /* Tabs */
        .tabs {
            display: flex;
            gap: 2rem;
            border-bottom: 1px solid #334155;
            margin-bottom: 1.5rem;
        }
        .tab {
            padding: 0.75rem 0;
            color: #94a3b8;
            font-weight: 500;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
        }
        .tab:hover { color: #e2e8f0; }
        .tab.active { color: #3b82f6; border-bottom-color: #3b82f6; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        
        /* Regime Header */
        .regime-header {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border: 1px solid #334155;
            border-left: 4px solid #10b981;
            border-radius: 8px;
            padding: 1.5rem 2rem;
            margin-bottom: 0.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .regime-label-small { color: #94a3b8; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.1em; }
        .regime-score-row { display: flex; align-items: baseline; gap: 1rem; margin-top: 0.25rem; }
        .regime-score { font-size: 3.5rem; font-weight: 700; color: #10b981; font-family: 'SF Mono', 'Consolas', monospace; line-height: 1; }
        .regime-delta { font-size: 1.25rem; color: #ef4444; font-family: 'SF Mono', 'Consolas', monospace; }
        .regime-badge { background: #10b98122; border: 1px solid #10b981; color: #10b981; padding: 0.5rem 1.5rem; border-radius: 4px; font-weight: 600; font-size: 1.1rem; }
        .regime-action { color: #94a3b8; font-size: 0.8rem; margin-top: 0.5rem; text-align: right; }
        .regime-footer { color: #64748b; font-size: 0.7rem; margin-bottom: 1rem; }
        
        /* Alerts */
        .alerts-container { margin-bottom: 1rem; }
        .alert { border-radius: 4px; padding: 0.5rem 1rem; font-size: 0.8rem; margin-bottom: 0.5rem; }
        .alert-ok { background: #10b98122; border: 1px solid #10b981; color: #6ee7b7; }
        .alert-high { background: #ef444422; border: 1px solid #ef4444; color: #fca5a5; }
        .alert-elevated { background: #f9731622; border: 1px solid #f97316; color: #fdba74; }
        .alert-level { font-weight: 600; }
        
        /* Chart */
        .chart-container { margin-bottom: 1rem; }
        #chart { height: 380px; }
        
        /* Event Legend */
        .event-legend {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            padding: 0.5rem 0;
            border-top: 1px solid #334155;
            margin-bottom: 1.5rem;
        }
        .event-item {
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }
        .event-bar {
            width: 3px;
            height: 14px;
            border-radius: 1px;
        }
        .event-date { color: #94a3b8; font-size: 0.75rem; }
        .event-label { color: #e2e8f0; font-size: 0.75rem; }
        
        /* Bottom Grid */
        .bottom-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; }
        @media (max-width: 1024px) { .bottom-grid { grid-template-columns: 1fr; } }
        
        /* Cards */
        .card { background: #1e293b; border: 1px solid #334155; border-radius: 8px; padding: 1rem 1.5rem; }
        .card-title { color: #94a3b8; font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 1rem; }
        
        /* Signal Breakdown */
        .signal-row { margin-bottom: 0.75rem; }
        .signal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.25rem; }
        .signal-name { color: #e2e8f0; font-size: 0.85rem; }
        .signal-weight { color: #64748b; font-size: 0.7rem; margin-left: 0.5rem; }
        .signal-value { font-family: 'SF Mono', monospace; font-size: 0.9rem; font-weight: 600; }
        .signal-bar-bg { background: #0f172a; border-radius: 2px; height: 6px; overflow: hidden; }
        .signal-bar { height: 100%; border-radius: 2px; }
        
        /* Current Levels */
        .level-row { display: flex; justify-content: space-between; padding: 0.4rem 0; border-bottom: 1px solid #334155; }
        .level-row:last-child { border-bottom: none; }
        .level-name { color: #94a3b8; font-size: 0.8rem; }
        .level-value { color: #e2e8f0; font-family: 'SF Mono', monospace; font-size: 0.85rem; }
        
        /* Indicators Tab */
        .tab-heading { color: #f1f5f9; font-size: 1.5rem; margin-bottom: 0.5rem; }
        .tab-intro { color: #94a3b8; margin-bottom: 1.5rem; }
        .indicator-card { background: #1e293b; border: 1px solid #334155; border-radius: 8px; padding: 1.5rem; margin-bottom: 1rem; }
        .indicator-card-header { display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem; }
        .indicator-card-title { color: #f1f5f9; font-size: 1.1rem; margin: 0; }
        .indicator-card-source { color: #64748b; font-size: 0.75rem; margin-top: 0.25rem; }
        .indicator-card-status-wrap { text-align: right; }
        .indicator-status { padding: 0.25rem 0.75rem; border-radius: 4px; font-size: 0.8rem; border: 1px solid; display: inline-block; }
        .indicator-weight { color: #64748b; font-size: 0.7rem; margin-top: 0.25rem; }
        .indicator-description { color: #cbd5e1; font-size: 0.9rem; margin-bottom: 1rem; }
        .indicator-details { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
        .indicator-detail-box { background: #0f172a; padding: 0.75rem; border-radius: 4px; }
        .indicator-detail-label { color: #64748b; font-size: 0.7rem; text-transform: uppercase; margin-bottom: 0.25rem; }
        .indicator-detail-value { color: #e2e8f0; font-size: 0.85rem; }
        @media (max-width: 768px) { .indicator-details { grid-template-columns: 1fr; } }
        
        /* Backtest & Models Tabs */
        .section-box { background: #1e293b; border: 1px solid #334155; border-radius: 8px; padding: 1.25rem; margin-bottom: 1.5rem; }
        .section-title { color: #f1f5f9; font-size: 1.1rem; margin: 1.5rem 0 1rem 0; }
        .metrics-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1.5rem; }
        .metric-box { background: #1e293b; border: 1px solid #334155; border-radius: 8px; padding: 1rem; text-align: center; }
        .metric-value { font-size: 1.5rem; font-weight: 600; margin: 0.25rem 0; }
        .metric-label { color: #64748b; font-size: 0.7rem; text-transform: uppercase; }
        .metric-sublabel { color: #94a3b8; font-size: 0.75rem; }
        .rankings-table { width: 100%; border-collapse: collapse; background: #1e293b; border-radius: 8px; overflow: hidden; margin-bottom: 1.5rem; }
        .rankings-table th { text-align: left; padding: 0.75rem 1rem; color: #94a3b8; font-size: 0.8rem; border-bottom: 1px solid #334155; }
        .rankings-table td { padding: 0.75rem 1rem; color: #e2e8f0; font-size: 0.85rem; border-bottom: 1px solid #334155; }
        .rankings-table tr:last-child td { border-bottom: none; }
        .stress-events { color: #94a3b8; margin-left: 1.25rem; margin-top: 0.5rem; }
        .stress-events li { margin-bottom: 0.25rem; }
        .failed { color: #ef4444 !important; }
        .warning { color: #f59e0b !important; }
        
        /* Stage boxes */
        .stage-row { display: flex; align-items: flex-start; gap: 0.75rem; margin-bottom: 1rem; }
        .stage-badge { padding: 0.25rem 0.5rem; border-radius: 4px; font-weight: 600; font-size: 0.8rem; color: white; white-space: nowrap; }
        .stage-text { color: #94a3b8; font-size: 0.9rem; }
        .stage-text strong { color: #e2e8f0; }
        
        /* Login overlay */
        .login-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: #0f172a; display: flex; align-items: center; justify-content: center; z-index: 1000; }
        .login-overlay.hidden { display: none; }
        .login-box { background: #1e293b; border: 1px solid #334155; border-radius: 12px; padding: 32px; width: 100%; max-width: 360px; text-align: center; }
        .login-title { font-size: 18px; font-weight: 600; color: #f1f5f9; margin-bottom: 8px; }
        .login-subtitle { font-size: 13px; color: #64748b; margin-bottom: 24px; }
        .login-input { width: 100%; padding: 12px 16px; background: #0f172a; border: 1px solid #334155; border-radius: 8px; color: #e2e8f0; font-size: 14px; margin-bottom: 16px; outline: none; }
        .login-input:focus { border-color: #3b82f6; }
        .login-button { width: 100%; padding: 12px 16px; background: #3b82f6; border: none; border-radius: 8px; color: #fff; font-size: 14px; font-weight: 500; cursor: pointer; }
        .login-button:hover { background: #2563eb; }
        .login-error { color: #ef4444; font-size: 13px; margin-top: 12px; display: none; }
        .dashboard-content { display: none; }
        .dashboard-content.visible { display: block; }
    </style>
</head>
<body>
    
    <div id="loginOverlay" class="login-overlay">
        <div class="login-box">
            <div class="login-title">Fast Market Dashboard</div>
            <div class="login-subtitle">Enter password to continue</div>
            <input type="password" id="passwordInput" class="login-input" placeholder="Password" autofocus>
            <button id="loginButton" class="login-button">Access Dashboard</button>
            <div id="loginError" class="login-error">Incorrect password</div>
        </div>
    </div>
    
    
    <div class="dashboard-content" id="dashboardContent">
    <div class="container">
        <div class="header">
            <div>
                <div class="header-title">Market Stress Monitor</div>
                <div class="header-subtitle">Asset Management Risk Dashboard</div>
            </div>
            <div class="header-meta">Data: FRED + Yahoo Finance<br>Refresh: Daily EOD</div>
        </div>
        
        <div class="period-selector">
            <label>History Period:</label>
            <select class="period-select" id="periodSelect">
                <option value="90">90 Days</option>
                <option value="180">180 Days</option>
                <option value="365" selected>1 Year</option>
            </select>
        </div>
        
        <div class="tabs">
            <div class="tab active" data-tab="dashboard">Dashboard</div>
            <div class="tab" data-tab="indicators">Indicators</div>
            <div class="tab" data-tab="backtest">Backtest</div>
            <div class="tab" data-tab="models">Models</div>
            <div class="tab" data-tab="forecast">Forecast</div>
        </div>
        
        <!-- Dashboard Tab -->
        <div class="tab-content active" id="tab-dashboard">
            <div class="regime-header">
                <div>
                    <div class="regime-label-small">Market Stress Level</div>
                    <div class="regime-score-row">
                        <span class="regime-score">24.1</span>
                        <span class="regime-delta">+12.0 (5d)</span>
                    </div>
                </div>
                <div style="text-align: right;">
                    <div class="regime-badge">CALM</div>
                    <div class="regime-action">Risk-on conditions</div>
                </div>
            </div>
            <div class="regime-footer">As of 2026-01-16 | Updated 12:24</div>
            
            <div class="alerts-container">
                <div class="alert alert-high"><span class="alert-level">HIGH:</span> Safe Haven (GLD/SPY) at 99th percentile</div>
            </div>
            
            <div class="chart-container">
                <div id="chart"></div>
            </div>
            
            <div class="event-legend" id="eventLegend"></div>
            
            <div class="bottom-grid">
                <div class="card">
                    <div class="card-title">Signal Breakdown (by contribution)</div>
                    
            <div class="signal-row">
                <div class="signal-header">
                    <span class="signal-name">! Safe Haven (GLD/SPY) <span class="signal-weight">6% wt</span></span>
                    <span class="signal-value" style="color: #fca5a5">99</span>
                </div>
                <div class="signal-bar-bg">
                    <div class="signal-bar" style="width: 98.80478087649402%; background: #ef4444;"></div>
                </div>
            </div>
        
            <div class="signal-row">
                <div class="signal-header">
                    <span class="signal-name"> VIX Term Structure <span class="signal-weight">8% wt</span></span>
                    <span class="signal-value" style="color: #fdba74">77</span>
                </div>
                <div class="signal-bar-bg">
                    <div class="signal-bar" style="width: 77.47059989613874%; background: #f97316;"></div>
                </div>
            </div>
        
            <div class="signal-row">
                <div class="signal-header">
                    <span class="signal-name"> VIX <span class="signal-weight">15% wt</span></span>
                    <span class="signal-value" style="color: #6ee7b7">25</span>
                </div>
                <div class="signal-bar-bg">
                    <div class="signal-bar" style="width: 25.099601593625497%; background: #10b981;"></div>
                </div>
            </div>
        
            <div class="signal-row">
                <div class="signal-header">
                    <span class="signal-name"> Sector Correlation <span class="signal-weight">8% wt</span></span>
                    <span class="signal-value" style="color: #6ee7b7">23</span>
                </div>
                <div class="signal-bar-bg">
                    <div class="signal-bar" style="width: 23.39541611726483%; background: #10b981;"></div>
                </div>
            </div>
        
            <div class="signal-row">
                <div class="signal-header">
                    <span class="signal-name"> USD Index <span class="signal-weight">8% wt</span></span>
                    <span class="signal-value" style="color: #6ee7b7">22</span>
                </div>
                <div class="signal-bar-bg">
                    <div class="signal-bar" style="width: 21.91235059760956%; background: #10b981;"></div>
                </div>
            </div>
        
            <div class="signal-row">
                <div class="signal-header">
                    <span class="signal-name"> Defensive Rotation <span class="signal-weight">10% wt</span></span>
                    <span class="signal-value" style="color: #6ee7b7">22</span>
                </div>
                <div class="signal-bar-bg">
                    <div class="signal-bar" style="width: 21.51394422310757%; background: #10b981;"></div>
                </div>
            </div>
        
            <div class="signal-row">
                <div class="signal-header">
                    <span class="signal-name"> HY Credit Spread <span class="signal-weight">20% wt</span></span>
                    <span class="signal-value" style="color: #6ee7b7">7</span>
                </div>
                <div class="signal-bar-bg">
                    <div class="signal-bar" style="width: 6.772908366533864%; background: #10b981;"></div>
                </div>
            </div>
        
            <div class="signal-row">
                <div class="signal-header">
                    <span class="signal-name"> IG Credit Spread <span class="signal-weight">15% wt</span></span>
                    <span class="signal-value" style="color: #6ee7b7">6</span>
                </div>
                <div class="signal-bar-bg">
                    <div class="signal-bar" style="width: 6.374501992031872%; background: #10b981;"></div>
                </div>
            </div>
        
            <div class="signal-row">
                <div class="signal-header">
                    <span class="signal-name"> S&P 500 Drawdown <span class="signal-weight">10% wt</span></span>
                    <span class="signal-value" style="color: #6ee7b7">1</span>
                </div>
                <div class="signal-bar-bg">
                    <div class="signal-bar" style="width: 1.0680395054226142%; background: #10b981;"></div>
                </div>
            </div>
        
                </div>
                <div class="card">
                    <div class="card-title">Current Levels</div>
                    
            <div class="level-row">
                <span class="level-name">HY Credit Spread</span>
                <span class="level-value">2.71%</span>
            </div>
        
            <div class="level-row">
                <span class="level-name">VIX</span>
                <span class="level-value">15.8</span>
            </div>
        
            <div class="level-row">
                <span class="level-name">IG Credit Spread</span>
                <span class="level-value">0.76%</span>
            </div>
        
            <div class="level-row">
                <span class="level-name">USD Index</span>
                <span class="level-value">120.6</span>
            </div>
        
            <div class="level-row">
                <span class="level-name">Defensive Rotation</span>
                <span class="level-value">0.355</span>
            </div>
        
            <div class="level-row">
                <span class="level-name">Sector Correlation</span>
                <span class="level-value">0.187</span>
            </div>
        
            <div class="level-row">
                <span class="level-name">VIX Term Structure</span>
                <span class="level-value">0.835 (backwardation)</span>
            </div>
        
            <div class="level-row">
                <span class="level-name">Safe Haven (GLD/SPY)</span>
                <span class="level-value">0.609</span>
            </div>
        
            <div class="level-row">
                <span class="level-name">S&P 500 Drawdown</span>
                <span class="level-value">6940</span>
            </div>
        
                </div>
            </div>
        </div>
        
        <!-- Indicators Tab -->
        <div class="tab-content" id="tab-indicators">
            
        <h2 class="tab-heading">Indicator Reference Guide</h2>
        <p class="tab-intro">Each indicator in the composite score is selected based on backtesting against historical stress events.</p>
        
            <div class="indicator-card">
                <div class="indicator-card-header">
                    <div>
                        <h3 class="indicator-card-title">High Yield Credit Spread</h3>
                        <div class="indicator-card-source">FRED (BAMLH0A0HYM2)</div>
                    </div>
                    <div class="indicator-card-status-wrap">
                        <div class="indicator-status" style="background: #10b98122; border-color: #10b981; color: #10b981;">
                            Low: 7
                        </div>
                        <div class="indicator-weight">Weight: 20%</div>
                    </div>
                </div>
                <p class="indicator-description">The spread between high yield (junk) bonds and treasuries. Widens sharply during stress as investors demand more compensation for risk.</p>
                <div class="indicator-details">
                    <div class="indicator-detail-box">
                        <div class="indicator-detail-label">Interpretation</div>
                        <div class="indicator-detail-value">Higher = more stress. During crises, spreads can exceed 10%. Normal range is 3-5%.</div>
                    </div>
                    <div class="indicator-detail-box">
                        <div class="indicator-detail-label">Backtest Performance</div>
                        <div class="indicator-detail-value">Signal Ratio: 2.20x | Detection: 100% (7/7 events)</div>
                    </div>
                </div>
            </div>
        
            <div class="indicator-card">
                <div class="indicator-card-header">
                    <div>
                        <h3 class="indicator-card-title">Investment Grade Credit Spread</h3>
                        <div class="indicator-card-source">FRED (BAMLC0A0CM)</div>
                    </div>
                    <div class="indicator-card-status-wrap">
                        <div class="indicator-status" style="background: #10b98122; border-color: #10b981; color: #10b981;">
                            Low: 6
                        </div>
                        <div class="indicator-weight">Weight: 15%</div>
                    </div>
                </div>
                <p class="indicator-description">Option-adjusted spread for investment grade corporate bonds vs treasuries. Covers the full IG spectrum including BBB (VIF analysis showed BBB was redundant).</p>
                <div class="indicator-details">
                    <div class="indicator-detail-box">
                        <div class="indicator-detail-label">Interpretation</div>
                        <div class="indicator-detail-value">Higher = more stress. IG spreads widen when investors flee corporate bonds for safer assets.</div>
                    </div>
                    <div class="indicator-detail-box">
                        <div class="indicator-detail-label">Backtest Performance</div>
                        <div class="indicator-detail-value">Signal Ratio: 2.15x | Detection: 100% (7/7 events)</div>
                    </div>
                </div>
            </div>
        
            <div class="indicator-card">
                <div class="indicator-card-header">
                    <div>
                        <h3 class="indicator-card-title">VIX (Volatility Index)</h3>
                        <div class="indicator-card-source">FRED (VIXCLS)</div>
                    </div>
                    <div class="indicator-card-status-wrap">
                        <div class="indicator-status" style="background: #10b98122; border-color: #10b981; color: #10b981;">
                            Low: 25
                        </div>
                        <div class="indicator-weight">Weight: 15%</div>
                    </div>
                </div>
                <p class="indicator-description">The 'fear gauge' - measures expected 30-day S&P 500 volatility implied by options prices.</p>
                <div class="indicator-details">
                    <div class="indicator-detail-box">
                        <div class="indicator-detail-label">Interpretation</div>
                        <div class="indicator-detail-value">Higher = more fear. Above 30 is elevated, above 40 is panic.</div>
                    </div>
                    <div class="indicator-detail-box">
                        <div class="indicator-detail-label">Backtest Performance</div>
                        <div class="indicator-detail-value">Signal Ratio: 1.90x | Detection: 100% (7/7 events)</div>
                    </div>
                </div>
            </div>
        
            <div class="indicator-card">
                <div class="indicator-card-header">
                    <div>
                        <h3 class="indicator-card-title">Defensive Rotation (XLU/XLY)</h3>
                        <div class="indicator-card-source">Yahoo Finance (derived)</div>
                    </div>
                    <div class="indicator-card-status-wrap">
                        <div class="indicator-status" style="background: #10b98122; border-color: #10b981; color: #10b981;">
                            Low: 22
                        </div>
                        <div class="indicator-weight">Weight: 10%</div>
                    </div>
                </div>
                <p class="indicator-description">Ratio of Utilities (defensive) to Consumer Discretionary (cyclical). Rising ratio indicates rotation to safety.</p>
                <div class="indicator-details">
                    <div class="indicator-detail-box">
                        <div class="indicator-detail-label">Interpretation</div>
                        <div class="indicator-detail-value">Higher = more defensive positioning. Spikes during risk-off periods.</div>
                    </div>
                    <div class="indicator-detail-box">
                        <div class="indicator-detail-label">Backtest Performance</div>
                        <div class="indicator-detail-value">Signal Ratio: 1.90x | Detection: 100% (2/2 events)</div>
                    </div>
                </div>
            </div>
        
            <div class="indicator-card">
                <div class="indicator-card-header">
                    <div>
                        <h3 class="indicator-card-title">USD Index</h3>
                        <div class="indicator-card-source">FRED (DTWEXBGS)</div>
                    </div>
                    <div class="indicator-card-status-wrap">
                        <div class="indicator-status" style="background: #10b98122; border-color: #10b981; color: #10b981;">
                            Low: 22
                        </div>
                        <div class="indicator-weight">Weight: 8%</div>
                    </div>
                </div>
                <p class="indicator-description">Trade-weighted US dollar index. Dollar strengthens as global reserve currency during crises.</p>
                <div class="indicator-details">
                    <div class="indicator-detail-box">
                        <div class="indicator-detail-label">Interpretation</div>
                        <div class="indicator-detail-value">Higher = flight to safety. Strong dollar can also create EM stress.</div>
                    </div>
                    <div class="indicator-detail-box">
                        <div class="indicator-detail-label">Backtest Performance</div>
                        <div class="indicator-detail-value">Signal Ratio: 1.72x | Detection: 100% (7/7 events)</div>
                    </div>
                </div>
            </div>
        
            <div class="indicator-card">
                <div class="indicator-card-header">
                    <div>
                        <h3 class="indicator-card-title">Sector Correlation</h3>
                        <div class="indicator-card-source">Yahoo Finance (derived)</div>
                    </div>
                    <div class="indicator-card-status-wrap">
                        <div class="indicator-status" style="background: #10b98122; border-color: #10b981; color: #10b981;">
                            Low: 23
                        </div>
                        <div class="indicator-weight">Weight: 8%</div>
                    </div>
                </div>
                <p class="indicator-description">Average pairwise correlation of S&P sector ETFs (60-day rolling). High correlation means diversification breaks down.</p>
                <div class="indicator-details">
                    <div class="indicator-detail-box">
                        <div class="indicator-detail-label">Interpretation</div>
                        <div class="indicator-detail-value">Higher = more stress. When all sectors move together, it signals panic selling.</div>
                    </div>
                    <div class="indicator-detail-box">
                        <div class="indicator-detail-label">Backtest Performance</div>
                        <div class="indicator-detail-value">Signal Ratio: 1.76x | Detection: 100% (2/2 events)</div>
                    </div>
                </div>
            </div>
        
            <div class="indicator-card">
                <div class="indicator-card-header">
                    <div>
                        <h3 class="indicator-card-title">VIX Term Structure</h3>
                        <div class="indicator-card-source">Yahoo Finance (VIX/VIX3M)</div>
                    </div>
                    <div class="indicator-card-status-wrap">
                        <div class="indicator-status" style="background: #ef444422; border-color: #ef4444; color: #ef4444;">
                            Elevated: 77
                        </div>
                        <div class="indicator-weight">Weight: 8%</div>
                    </div>
                </div>
                <p class="indicator-description">Ratio of spot VIX to 3-month VIX. Normally in contango (>1). Backwardation (<1) signals panic.</p>
                <div class="indicator-details">
                    <div class="indicator-detail-box">
                        <div class="indicator-detail-label">Interpretation</div>
                        <div class="indicator-detail-value">Below 1.0 = backwardation = panic. Below 0.9 = severe stress.</div>
                    </div>
                    <div class="indicator-detail-box">
                        <div class="indicator-detail-label">Backtest Performance</div>
                        <div class="indicator-detail-value">Signal Ratio: 1.67x | Detection: 100% (2/2 events)</div>
                    </div>
                </div>
            </div>
        
            <div class="indicator-card">
                <div class="indicator-card-header">
                    <div>
                        <h3 class="indicator-card-title">Safe Haven Demand (GLD/SPY)</h3>
                        <div class="indicator-card-source">Yahoo Finance (derived)</div>
                    </div>
                    <div class="indicator-card-status-wrap">
                        <div class="indicator-status" style="background: #ef444422; border-color: #ef4444; color: #ef4444;">
                            Elevated: 99
                        </div>
                        <div class="indicator-weight">Weight: 6%</div>
                    </div>
                </div>
                <p class="indicator-description">Ratio of gold to S&P 500. Rising ratio indicates flight to gold as safe haven.</p>
                <div class="indicator-details">
                    <div class="indicator-detail-box">
                        <div class="indicator-detail-label">Interpretation</div>
                        <div class="indicator-detail-value">Higher = more fear. Gold outperforms equities during stress.</div>
                    </div>
                    <div class="indicator-detail-box">
                        <div class="indicator-detail-label">Backtest Performance</div>
                        <div class="indicator-detail-value">Signal Ratio: 1.42x | Detection: 100% (2/2 events)</div>
                    </div>
                </div>
            </div>
        
            <div class="indicator-card">
                <div class="indicator-card-header">
                    <div>
                        <h3 class="indicator-card-title">S&P 500 Drawdown</h3>
                        <div class="indicator-card-source">FRED (SP500)</div>
                    </div>
                    <div class="indicator-card-status-wrap">
                        <div class="indicator-status" style="background: #10b98122; border-color: #10b981; color: #10b981;">
                            Low: 1
                        </div>
                        <div class="indicator-weight">Weight: 10%</div>
                    </div>
                </div>
                <p class="indicator-description">Current drawdown from 52-week high. Direct measure of equity market stress.</p>
                <div class="indicator-details">
                    <div class="indicator-detail-box">
                        <div class="indicator-detail-label">Interpretation</div>
                        <div class="indicator-detail-value">Higher = deeper drawdown. 10%+ is correction, 20%+ is bear market.</div>
                    </div>
                    <div class="indicator-detail-box">
                        <div class="indicator-detail-label">Backtest Performance</div>
                        <div class="indicator-detail-value">Signal Ratio: N/A | Detection: 100%</div>
                    </div>
                </div>
            </div>
        
    
        </div>
        
        <!-- Backtest Tab -->
        <div class="tab-content" id="tab-backtest">
            
        <h2 class="tab-heading">Backtesting Methodology & Results</h2>
        
        <div class="section-box">
            <h3 style="color: #f1f5f9; margin-bottom: 0.75rem;">How We Test Indicators</h3>
            <p style="color: #94a3b8;">Each indicator is evaluated against <strong style="color: #e2e8f0;">6 major market stress events</strong>:</p>
            <ul class="stress-events">
                <li><strong>2008-09:</strong> Financial Crisis (56.8% drawdown)</li>
                <li><strong>2011:</strong> Debt Ceiling Crisis (19.4% drawdown)</li>
                <li><strong>2015:</strong> China Devaluation (12.4% drawdown)</li>
                <li><strong>2018:</strong> Fed Tightening (19.8% drawdown)</li>
                <li><strong>2020:</strong> COVID Crash (33.9% drawdown)</li>
                <li><strong>2022:</strong> Rate Shock (25.4% drawdown)</li>
            </ul>
        </div>
        
        <div class="metrics-grid">
            <div class="section-box">
                <h4 style="color: #f1f5f9; margin-bottom: 0.5rem;">Signal Ratio</h4>
                <p style="color: #94a3b8; font-size: 0.85rem;">Average percentile during stress / Average during normal times.</p>
                <p style="color: #10b981; font-size: 0.85rem; margin-top: 0.5rem;">Higher is better. 2.0x = twice as elevated during stress.</p>
            </div>
            <div class="section-box">
                <h4 style="color: #f1f5f9; margin-bottom: 0.5rem;">Detection Rate</h4>
                <p style="color: #94a3b8; font-size: 0.85rem;">% of stress events where indicator exceeded 70th percentile.</p>
                <p style="color: #10b981; font-size: 0.85rem; margin-top: 0.5rem;">Higher is better. 100% = caught every major event.</p>
            </div>
        </div>
        
        <h3 class="section-title">Indicator Rankings</h3>
        <table class="rankings-table">
            <thead><tr><th>Indicator</th><th>Signal Ratio</th><th>Detection</th><th>Tier</th></tr></thead>
            <tbody>
                <tr><td>HY Credit Spread</td><td>2.19x</td><td>100%</td><td>1</td></tr>
                <tr><td>BBB Credit Spread</td><td>2.18x</td><td>100%</td><td>1</td></tr>
                <tr><td>VIX</td><td>1.89x</td><td>100%</td><td>2</td></tr>
                <tr><td>Defensive Rotation</td><td>1.89x</td><td>100%</td><td>2</td></tr>
                <tr><td>USD Index</td><td>1.73x</td><td>100%</td><td>2</td></tr>
                <tr><td>Sector Correlation</td><td>1.75x</td><td>100%</td><td>3</td></tr>
                <tr><td>VIX Term Structure</td><td>1.63x</td><td>100%</td><td>3</td></tr>
                <tr><td>Safe Haven (GLD/SPY)</td><td>1.38x</td><td>100%</td><td>4</td></tr>
                <tr><td>S&P 500 Drawdown</td><td>N/A</td><td>100%</td><td>4</td></tr>
            </tbody>
        </table>
        
        <h3 class="section-title">What Didn't Work</h3>
        <table class="rankings-table">
            <thead><tr><th>Indicator</th><th>Signal Ratio</th><th>Problem</th></tr></thead>
            <tbody>
                <tr><td class="failed">RSI (SPY, QQQ, IWM)</td><td class="failed">0.53-0.58x</td><td>Goes DOWN during stress</td></tr>
                <tr><td class="failed">10Y-2Y Spread</td><td class="failed">0.61x</td><td>Only 33% detection - too slow</td></tr>
                <tr><td class="failed">SKEW Index</td><td class="failed">0.22x</td><td>Opposite of expected</td></tr>
                <tr><td class="warning">Fed Funds Rate</td><td class="warning">1.02x</td><td>Policy-driven, not market</td></tr>
            </tbody>
        </table>
    
        </div>
        
        <!-- Models Tab -->
        <div class="tab-content" id="tab-models">
            
        <h2 class="tab-heading">Linear vs Non-Linear Models</h2>
        <p class="tab-intro">Testing whether non-linear relationships improve fast market detection.</p>
        
        <div class="section-box">
            <h4 style="color: #ef4444; margin-bottom: 0.75rem;">What Linear Models Miss</h4>
            <ul style="color: #94a3b8; padding-left: 1.25rem;">
                <li style="margin-bottom: 0.5rem;"><strong style="color: #e2e8f0;">Convexity at extremes</strong> - Going from 70th to 85th percentile is fundamentally different than 40th to 55th.</li>
                <li style="margin-bottom: 0.5rem;"><strong style="color: #e2e8f0;">Convergence effects</strong> - When VIX, credit, and USD all spike together, it's multiplicative, not additive.</li>
                <li style="margin-bottom: 0.5rem;"><strong style="color: #e2e8f0;">Regime shifts</strong> - In calm markets, credit leads. In stress, everything correlates.</li>
                <li><strong style="color: #e2e8f0;">Lead-lag relationships</strong> - Credit spreads widen before equities fall.</li>
            </ul>
        </div>
        
        <h3 class="section-title">Backtest Results: 6 Major Stress Events</h3>
        <table class="rankings-table">
            <thead><tr><th>Event</th><th>Linear</th><th>Hybrid</th></tr></thead>
            <tbody>
                <tr><td>Financial Crisis (2008)</td><td>72</td><td style="color: #10b981;">95</td></tr>
                <tr><td>Debt Ceiling (2011)</td><td>72</td><td style="color: #10b981;">95</td></tr>
                <tr><td>China Devaluation (2015)</td><td>72</td><td style="color: #10b981;">95</td></tr>
                <tr><td>Fed Tightening (2018)</td><td>71</td><td style="color: #10b981;">93</td></tr>
                <tr><td>COVID Crash (2020)</td><td>73</td><td style="color: #10b981;">95</td></tr>
                <tr><td>Rate Shock (2022)</td><td>72</td><td style="color: #10b981;">99</td></tr>
            </tbody>
        </table>
        
        <h3 class="section-title">Model Performance</h3>
        <div class="metrics-grid">
            <div class="metric-box">
                <div class="metric-label">Signal Ratio</div>
                <div class="metric-value" style="color: #3b82f6;">+24%</div>
                <div class="metric-sublabel">Hybrid vs Linear</div>
            </div>
            <div class="metric-box">
                <div class="metric-label">Peak Score</div>
                <div class="metric-value" style="color: #10b981;">95-99</div>
                <div class="metric-sublabel">Hybrid in stress</div>
            </div>
            <div class="metric-box">
                <div class="metric-label">Lead Time</div>
                <div class="metric-value" style="color: #f59e0b;">+0.8d</div>
                <div class="metric-sublabel">Early warning</div>
            </div>
            <div class="metric-box">
                <div class="metric-label">Precision</div>
                <div class="metric-value" style="color: #ef4444;">-28%</div>
                <div class="metric-sublabel">More false positives</div>
            </div>
        </div>
        
        <h3 class="section-title">Practical Recommendation</h3>
        <div class="section-box" style="background: linear-gradient(135deg, #1e3a5f 0%, #1e293b 100%); border-color: #3b82f6;">
            <h4 style="color: #f1f5f9; margin-bottom: 1rem;">Two-Stage Monitoring Approach</h4>
            <div class="stage-row">
                <span class="stage-badge" style="background: #10b981;">STAGE 1</span>
                <span class="stage-text">Use <strong>Linear model</strong> for daily monitoring. Fewer false alarms, stable baseline.</span>
            </div>
            <div class="stage-row">
                <span class="stage-badge" style="background: #f59e0b;">STAGE 2</span>
                <span class="stage-text">When Linear crosses <strong>50+</strong>, switch to <strong>Hybrid lens</strong> for amplified signal.</span>
            </div>
            <div class="stage-row">
                <span class="stage-badge" style="background: #ef4444;">STAGE 3</span>
                <span class="stage-text">If Hybrid exceeds <strong>85</strong>, treat as confirmed fast market.</span>
            </div>
        </div>
    
        </div>
        
        <!-- Forecast Tab -->
        <div class="tab-content" id="tab-forecast">
            
        <h2 class="tab-heading">Large Move Forecaster</h2>
        <p class="tab-intro">Neural network model to predict S&amp;P 500 moves greater than 3% (either direction) using t-1 (previous day) indicator values.</p>
        
        <h3 class="section-title">Current Forecast</h3>
        <div class="metrics-grid" style="grid-template-columns: repeat(3, 1fr);">
            <div class="metric-box">
                <div class="metric-label">Probability of Large Move</div>
                <div class="metric-value" style="font-size: 2rem; color: #10b981;">0.0%</div>
                <div class="metric-sublabel" style="color: #10b981; font-weight: 600;">NORMAL</div>
            </div>
            <div class="metric-box">
                <div class="metric-label">Model Prediction</div>
                <div class="metric-value" style="font-size: 1rem; color: #10b981;">Normal Day Expected</div>
                <div class="metric-sublabel">Threshold: 25%</div>
            </div>
            <div class="metric-box">
                <div class="metric-label">Actual Outcome</div>
                <div class="metric-value" style="font-size: 1rem; color: #10b981;">Normal (+0.65%)</div>
                <div class="metric-sublabel">Date: 2026-01-09</div>
            </div>
        </div>
        
        <h3 class="section-title">Model Performance (Hold-Out Test Set)</h3>
        <div class="metrics-grid">
            <div class="metric-box">
                <div class="metric-label">Accuracy</div>
                <div class="metric-value">97.8%</div>
            </div>
            <div class="metric-box">
                <div class="metric-label">Precision</div>
                <div class="metric-value">50.0%</div>
            </div>
            <div class="metric-box">
                <div class="metric-label">Recall</div>
                <div class="metric-value">20.0%</div>
            </div>
            <div class="metric-box">
                <div class="metric-label">AUC-ROC</div>
                <div class="metric-value">0.876</div>
            </div>
        </div>
        
        <div class="section-box">
            <div style="color: #94a3b8; font-size: 0.85rem;">
                <strong style="color: #e2e8f0;">Training Data:</strong> 925 samples 
                (12 large moves)<br>
                <strong style="color: #e2e8f0;">Test Data:</strong> 232 samples 
                (5 large moves)
            </div>
        </div>
        
        <h3 class="section-title">Walk-Forward Backtest (2020-Present)</h3>
        <div class="metrics-grid" style="grid-template-columns: 1fr 1fr;">
            <div class="section-box">
                <h4 style="color: #e2e8f0; margin-bottom: 1rem;">Detection Performance</h4>
                <table style="width: 100%; border-collapse: collapse; color: #e2e8f0; font-size: 0.85rem;">
                    <tr style="border-bottom: 1px solid #334155;">
                        <td style="padding: 0.5rem 0;">Recall (Sensitivity)</td>
                        <td style="text-align: right; font-family: monospace;">75.0%</td>
                    </tr>
                    <tr style="border-bottom: 1px solid #334155;">
                        <td style="padding: 0.5rem 0;">Large Moves Caught</td>
                        <td style="text-align: right; font-family: monospace;">9 / 12</td>
                    </tr>
                    <tr style="border-bottom: 1px solid #334155;">
                        <td style="padding: 0.5rem 0;">False Alarms</td>
                        <td style="text-align: right; font-family: monospace;">429</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem 0;">Precision</td>
                        <td style="text-align: right; font-family: monospace;">2.1%</td>
                    </tr>
                </table>
            </div>
            <div class="section-box">
                <h4 style="color: #e2e8f0; margin-bottom: 1rem;">Confusion Matrix</h4>
                <table style="width: 100%; text-align: center; color: #e2e8f0; font-size: 0.85rem;">
                    <tr>
                        <td></td>
                        <td style="color: #94a3b8; padding: 0.25rem;">Pred: Normal</td>
                        <td style="color: #94a3b8; padding: 0.25rem;">Pred: Large</td>
                    </tr>
                    <tr>
                        <td style="color: #94a3b8; text-align: left;">Actual: Normal</td>
                        <td style="background: #10b98133; padding: 0.5rem; font-family: monospace;">447</td>
                        <td style="background: #f9731633; padding: 0.5rem; font-family: monospace;">429</td>
                    </tr>
                    <tr>
                        <td style="color: #94a3b8; text-align: left;">Actual: Large</td>
                        <td style="background: #ef444433; padding: 0.5rem; font-family: monospace;">3</td>
                        <td style="background: #10b98133; padding: 0.5rem; font-family: monospace;">9</td>
                    </tr>
                </table>
            </div>
        </div>
        
        <h3 class="section-title">Feature Importance (Approximate)</h3>
        <div class="section-box">
            
            <div style="display: flex; align-items: center; margin-bottom: 0.5rem;">
                <div style="width: 180px; color: #94a3b8; font-size: 0.8rem;">usd_t1</div>
                <div style="flex: 1; background: #334155; border-radius: 4px; height: 18px; margin: 0 0.5rem;">
                    <div style="width: 39.5%; background: #3b82f6; height: 100%; border-radius: 4px;"></div>
                </div>
                <div style="width: 50px; text-align: right; color: #e2e8f0; font-size: 0.8rem; font-family: monospace;">
                    7.9%
                </div>
            </div>
        
            <div style="display: flex; align-items: center; margin-bottom: 0.5rem;">
                <div style="width: 180px; color: #94a3b8; font-size: 0.8rem;">sector_corr_t1</div>
                <div style="flex: 1; background: #334155; border-radius: 4px; height: 18px; margin: 0 0.5rem;">
                    <div style="width: 38.95%; background: #3b82f6; height: 100%; border-radius: 4px;"></div>
                </div>
                <div style="width: 50px; text-align: right; color: #e2e8f0; font-size: 0.8rem; font-family: monospace;">
                    7.8%
                </div>
            </div>
        
            <div style="display: flex; align-items: center; margin-bottom: 0.5rem;">
                <div style="width: 180px; color: #94a3b8; font-size: 0.8rem;">vix_term_t1</div>
                <div style="flex: 1; background: #334155; border-radius: 4px; height: 18px; margin: 0 0.5rem;">
                    <div style="width: 38.85%; background: #3b82f6; height: 100%; border-radius: 4px;"></div>
                </div>
                <div style="width: 50px; text-align: right; color: #e2e8f0; font-size: 0.8rem; font-family: monospace;">
                    7.8%
                </div>
            </div>
        
            <div style="display: flex; align-items: center; margin-bottom: 0.5rem;">
                <div style="width: 180px; color: #94a3b8; font-size: 0.8rem;">hy_spread_5d_change</div>
                <div style="flex: 1; background: #334155; border-radius: 4px; height: 18px; margin: 0 0.5rem;">
                    <div style="width: 37.85%; background: #3b82f6; height: 100%; border-radius: 4px;"></div>
                </div>
                <div style="width: 50px; text-align: right; color: #e2e8f0; font-size: 0.8rem; font-family: monospace;">
                    7.6%
                </div>
            </div>
        
            <div style="display: flex; align-items: center; margin-bottom: 0.5rem;">
                <div style="width: 180px; color: #94a3b8; font-size: 0.8rem;">safe_haven_t1</div>
                <div style="flex: 1; background: #334155; border-radius: 4px; height: 18px; margin: 0 0.5rem;">
                    <div style="width: 37.05%; background: #3b82f6; height: 100%; border-radius: 4px;"></div>
                </div>
                <div style="width: 50px; text-align: right; color: #e2e8f0; font-size: 0.8rem; font-family: monospace;">
                    7.4%
                </div>
            </div>
        
            <div style="display: flex; align-items: center; margin-bottom: 0.5rem;">
                <div style="width: 180px; color: #94a3b8; font-size: 0.8rem;">vix_5d_std</div>
                <div style="flex: 1; background: #334155; border-radius: 4px; height: 18px; margin: 0 0.5rem;">
                    <div style="width: 36.35%; background: #3b82f6; height: 100%; border-radius: 4px;"></div>
                </div>
                <div style="width: 50px; text-align: right; color: #e2e8f0; font-size: 0.8rem; font-family: monospace;">
                    7.3%
                </div>
            </div>
        
            <div style="display: flex; align-items: center; margin-bottom: 0.5rem;">
                <div style="width: 180px; color: #94a3b8; font-size: 0.8rem;">sp500_20d_vol</div>
                <div style="flex: 1; background: #334155; border-radius: 4px; height: 18px; margin: 0 0.5rem;">
                    <div style="width: 36.35%; background: #3b82f6; height: 100%; border-radius: 4px;"></div>
                </div>
                <div style="width: 50px; text-align: right; color: #e2e8f0; font-size: 0.8rem; font-family: monospace;">
                    7.3%
                </div>
            </div>
        
            <div style="display: flex; align-items: center; margin-bottom: 0.5rem;">
                <div style="width: 180px; color: #94a3b8; font-size: 0.8rem;">ig_spread_t1</div>
                <div style="flex: 1; background: #334155; border-radius: 4px; height: 18px; margin: 0 0.5rem;">
                    <div style="width: 35.7%; background: #3b82f6; height: 100%; border-radius: 4px;"></div>
                </div>
                <div style="width: 50px; text-align: right; color: #e2e8f0; font-size: 0.8rem; font-family: monospace;">
                    7.1%
                </div>
            </div>
        
            <div style="display: flex; align-items: center; margin-bottom: 0.5rem;">
                <div style="width: 180px; color: #94a3b8; font-size: 0.8rem;">defensive_t1</div>
                <div style="flex: 1; background: #334155; border-radius: 4px; height: 18px; margin: 0 0.5rem;">
                    <div style="width: 35.7%; background: #3b82f6; height: 100%; border-radius: 4px;"></div>
                </div>
                <div style="width: 50px; text-align: right; color: #e2e8f0; font-size: 0.8rem; font-family: monospace;">
                    7.1%
                </div>
            </div>
        
            <div style="display: flex; align-items: center; margin-bottom: 0.5rem;">
                <div style="width: 180px; color: #94a3b8; font-size: 0.8rem;">sp500_5d_return</div>
                <div style="flex: 1; background: #334155; border-radius: 4px; height: 18px; margin: 0 0.5rem;">
                    <div style="width: 34.15%; background: #3b82f6; height: 100%; border-radius: 4px;"></div>
                </div>
                <div style="width: 50px; text-align: right; color: #e2e8f0; font-size: 0.8rem; font-family: monospace;">
                    6.8%
                </div>
            </div>
        
        </div>
        
        <h3 class="section-title">Methodology</h3>
        <div class="metrics-grid" style="grid-template-columns: 1fr 1fr;">
            <div class="section-box">
                <h4 style="color: #3b82f6; margin-bottom: 0.75rem;">Model Architecture</h4>
                <ul style="color: #94a3b8; font-size: 0.85rem; padding-left: 1.25rem;">
                    <li style="margin-bottom: 0.5rem;"><strong style="color: #e2e8f0;">Type:</strong> Multi-Layer Perceptron (MLP) Neural Network</li>
                    <li style="margin-bottom: 0.5rem;"><strong style="color: #e2e8f0;">Layers:</strong> 64 - 32 - 16 neurons (3 hidden layers)</li>
                    <li style="margin-bottom: 0.5rem;"><strong style="color: #e2e8f0;">Activation:</strong> ReLU with adaptive learning rate</li>
                    <li style="margin-bottom: 0.5rem;"><strong style="color: #e2e8f0;">Regularization:</strong> L2 (alpha=0.01) + early stopping</li>
                    <li><strong style="color: #e2e8f0;">Class Balancing:</strong> Oversampling (target 15% positive)</li>
                </ul>
            </div>
            <div class="section-box">
                <h4 style="color: #3b82f6; margin-bottom: 0.75rem;">Key Design Choices</h4>
                <ul style="color: #94a3b8; font-size: 0.85rem; padding-left: 1.25rem;">
                    <li style="margin-bottom: 0.5rem;"><strong style="color: #e2e8f0;">Target:</strong> Binary (|return| &gt; 3%)</li>
                    <li style="margin-bottom: 0.5rem;"><strong style="color: #e2e8f0;">Features:</strong> t-1 lagged indicators + rolling stats</li>
                    <li style="margin-bottom: 0.5rem;"><strong style="color: #e2e8f0;">Prediction Threshold:</strong> 0.25 (lowered from 0.5 for rare events)</li>
                    <li style="margin-bottom: 0.5rem;"><strong style="color: #e2e8f0;">Validation:</strong> Walk-forward (no lookahead bias)</li>
                    <li><strong style="color: #e2e8f0;">Priority:</strong> High recall (catch moves) over precision</li>
                </ul>
            </div>
        </div>
        
        <h3 class="section-title">Interpretation Guide</h3>
        <table class="rankings-table">
            <thead><tr><th>Probability</th><th>Signal</th><th>Suggested Action</th></tr></thead>
            <tbody>
                <tr><td style="color: #10b981;">0-15%</td><td>Normal conditions</td><td>Standard risk protocols</td></tr>
                <tr><td style="color: #f59e0b;">15-30%</td><td>Slightly elevated</td><td>Monitor closely, review hedges</td></tr>
                <tr><td style="color: #f97316;">30-50%</td><td>Elevated risk</td><td>Consider reducing exposure, tighten stops</td></tr>
                <tr><td style="color: #ef4444;">50%+</td><td>High probability of large move</td><td>Active risk management, ensure liquidity</td></tr>
            </tbody>
        </table>
        
        <div class="section-box" style="background: #0f172a; border-color: #f59e0b44; margin-top: 1rem;">
            <h4 style="color: #f59e0b; margin-bottom: 0.5rem;">Important Notes</h4>
            <ul style="color: #94a3b8; font-size: 0.85rem; padding-left: 1.25rem;">
                <li style="margin-bottom: 0.25rem;">Large moves (&gt;3%) are rare (~1% of days), so precision is inherently low</li>
                <li style="margin-bottom: 0.25rem;">The model is tuned for high recall (catching moves) at the cost of false alarms</li>
                <li>Use in conjunction with the composite stress score, not as a standalone signal</li>
            </ul>
        </div>
    
        </div>
    </div>
    </div>
    
    <script>
        // Market Events
        const MARKET_EVENTS = [{"date": "2025-01-27", "label": "DeepSeek shock", "color": "#ef4444"}, {"date": "2025-04-02", "label": "Liberation Day tariffs", "color": "#ef4444"}, {"date": "2025-04-09", "label": "90-day tariff pause", "color": "#10b981"}, {"date": "2025-06-27", "label": "New all-time high", "color": "#10b981"}, {"date": "2025-11-18", "label": "VIX spike to 52", "color": "#ef4444"}, {"date": "2025-12-10", "label": "Fed hawkish pivot", "color": "#f59e0b"}];
        
        // Chart data
        const CHART_DATA = {
            dates: ["2024-08-05", "2024-08-06", "2024-08-07", "2024-08-08", "2024-08-09", "2024-08-12", "2024-08-13", "2024-08-14", "2024-08-15", "2024-08-16", "2024-08-19", "2024-08-20", "2024-08-21", "2024-08-22", "2024-08-23", "2024-08-26", "2024-08-27", "2024-08-28", "2024-08-29", "2024-08-30", "2024-09-03", "2024-09-04", "2024-09-05", "2024-09-06", "2024-09-09", "2024-09-10", "2024-09-11", "2024-09-12", "2024-09-13", "2024-09-16", "2024-09-17", "2024-09-18", "2024-09-19", "2024-09-20", "2024-09-23", "2024-09-24", "2024-09-25", "2024-09-26", "2024-09-27", "2024-09-30", "2024-10-01", "2024-10-02", "2024-10-03", "2024-10-04", "2024-10-07", "2024-10-08", "2024-10-09", "2024-10-10", "2024-10-11", "2024-10-14", "2024-10-15", "2024-10-16", "2024-10-17", "2024-10-18", "2024-10-21", "2024-10-22", "2024-10-23", "2024-10-24", "2024-10-25", "2024-10-28", "2024-10-29", "2024-10-30", "2024-10-31", "2024-11-01", "2024-11-04", "2024-11-05", "2024-11-06", "2024-11-07", "2024-11-08", "2024-11-11", "2024-11-12", "2024-11-13", "2024-11-14", "2024-11-15", "2024-11-18", "2024-11-19", "2024-11-20", "2024-11-21", "2024-11-22", "2024-11-25", "2024-11-26", "2024-11-27", "2024-11-29", "2024-12-02", "2024-12-03", "2024-12-04", "2024-12-05", "2024-12-06", "2024-12-09", "2024-12-10", "2024-12-11", "2024-12-12", "2024-12-13", "2024-12-16", "2024-12-17", "2024-12-18", "2024-12-19", "2024-12-20", "2024-12-23", "2024-12-24", "2024-12-26", "2024-12-27", "2024-12-30", "2024-12-31", "2025-01-02", "2025-01-03", "2025-01-06", "2025-01-07", "2025-01-08", "2025-01-10", "2025-01-13", "2025-01-14", "2025-01-15", "2025-01-16", "2025-01-17", "2025-01-21", "2025-01-22", "2025-01-23", "2025-01-24", "2025-01-27", "2025-01-28", "2025-01-29", "2025-01-30", "2025-01-31", "2025-02-03", "2025-02-04", "2025-02-05", "2025-02-06", "2025-02-07", "2025-02-10", "2025-02-11", "2025-02-12", "2025-02-13", "2025-02-14", "2025-02-18", "2025-02-19", "2025-02-20", "2025-02-21", "2025-02-24", "2025-02-25", "2025-02-26", "2025-02-27", "2025-02-28", "2025-03-03", "2025-03-04", "2025-03-05", "2025-03-06", "2025-03-07", "2025-03-10", "2025-03-11", "2025-03-12", "2025-03-13", "2025-03-14", "2025-03-17", "2025-03-18", "2025-03-19", "2025-03-20", "2025-03-21", "2025-03-24", "2025-03-25", "2025-03-26", "2025-03-27", "2025-03-28", "2025-03-31", "2025-04-01", "2025-04-02", "2025-04-03", "2025-04-04", "2025-04-07", "2025-04-08", "2025-04-09", "2025-04-10", "2025-04-11", "2025-04-14", "2025-04-15", "2025-04-16", "2025-04-17", "2025-04-21", "2025-04-22", "2025-04-23", "2025-04-24", "2025-04-25", "2025-04-28", "2025-04-29", "2025-04-30", "2025-05-01", "2025-05-02", "2025-05-05", "2025-05-06", "2025-05-07", "2025-05-08", "2025-05-09", "2025-05-12", "2025-05-13", "2025-05-14", "2025-05-15", "2025-05-16", "2025-05-19", "2025-05-20", "2025-05-21", "2025-05-22", "2025-05-23", "2025-05-27", "2025-05-28", "2025-05-29", "2025-05-30", "2025-06-02", "2025-06-03", "2025-06-04", "2025-06-05", "2025-06-06", "2025-06-09", "2025-06-10", "2025-06-11", "2025-06-12", "2025-06-13", "2025-06-16", "2025-06-17", "2025-06-18", "2025-06-20", "2025-06-23", "2025-06-24", "2025-06-25", "2025-06-26", "2025-06-27", "2025-06-30", "2025-07-01", "2025-07-02", "2025-07-03", "2025-07-07", "2025-07-08", "2025-07-09", "2025-07-10", "2025-07-11", "2025-07-14", "2025-07-15", "2025-07-16", "2025-07-17", "2025-07-18", "2025-07-21", "2025-07-22", "2025-07-23", "2025-07-24", "2025-07-25", "2025-07-28", "2025-07-29", "2025-07-30", "2025-07-31", "2025-08-01", "2025-08-04", "2025-08-05", "2025-08-06", "2025-08-07", "2025-08-08", "2025-08-11", "2025-08-12", "2025-08-13", "2025-08-14", "2025-08-15", "2025-08-18", "2025-08-19", "2025-08-20", "2025-08-21", "2025-08-22", "2025-08-25", "2025-08-26", "2025-08-27", "2025-08-28", "2025-08-29", "2025-09-02", "2025-09-03", "2025-09-04", "2025-09-05", "2025-09-08", "2025-09-09", "2025-09-10", "2025-09-11", "2025-09-12", "2025-09-15", "2025-09-16", "2025-09-17", "2025-09-18", "2025-09-19", "2025-09-22", "2025-09-23", "2025-09-24", "2025-09-25", "2025-09-26", "2025-09-29", "2025-09-30", "2025-10-01", "2025-10-02", "2025-10-03", "2025-10-06", "2025-10-07", "2025-10-08", "2025-10-09", "2025-10-10", "2025-10-13", "2025-10-14", "2025-10-15", "2025-10-16", "2025-10-17", "2025-10-20", "2025-10-21", "2025-10-22", "2025-10-23", "2025-10-24", "2025-10-27", "2025-10-28", "2025-10-29", "2025-10-30", "2025-10-31", "2025-11-03", "2025-11-04", "2025-11-05", "2025-11-06", "2025-11-07", "2025-11-10", "2025-11-11", "2025-11-12", "2025-11-13", "2025-11-14", "2025-11-17", "2025-11-18", "2025-11-19", "2025-11-20", "2025-11-21", "2025-11-24", "2025-11-25", "2025-11-26", "2025-11-28", "2025-12-01", "2025-12-02", "2025-12-03", "2025-12-04", "2025-12-05", "2025-12-08", "2025-12-09", "2025-12-10", "2025-12-11", "2025-12-12", "2025-12-15", "2025-12-16", "2025-12-17", "2025-12-18", "2025-12-19", "2025-12-22", "2025-12-23", "2025-12-24", "2025-12-26", "2025-12-29", "2025-12-30", "2025-12-31", "2026-01-02", "2026-01-05", "2026-01-06", "2026-01-07", "2026-01-08", "2026-01-09", "2026-01-12", "2026-01-13", "2026-01-14", "2026-01-15", "2026-01-16"],
            values: [73.0, 66.0, 65.1, 61.8, 60.2, 61.8, 58.7, 52.7, 45.3, 43.5, 38.0, 43.1, 44.7, 44.2, 36.9, 35.8, 36.4, 39.8, 35.8, 32.9, 53.6, 55.4, 52.7, 57.4, 55.6, 59.5, 56.9, 52.1, 49.1, 46.9, 44.5, 40.8, 28.0, 30.6, 28.3, 30.8, 30.4, 25.2, 28.3, 24.9, 30.0, 28.6, 29.7, 26.7, 29.3, 29.8, 29.6, 30.4, 29.6, 29.1, 30.8, 31.0, 30.6, 28.9, 31.0, 31.4, 33.6, 32.9, 33.2, 32.5, 32.3, 32.9, 35.6, 35.2, 35.2, 33.1, 27.9, 25.3, 25.1, 25.1, 24.5, 23.0, 23.7, 29.1, 27.8, 29.2, 30.9, 29.8, 26.1, 24.6, 24.1, 24.1, 22.4, 21.4, 20.1, 20.6, 21.7, 17.5, 24.2, 23.8, 20.5, 22.8, 23.0, 26.5, 30.9, 38.3, 42.0, 37.1, 35.0, 28.5, 29.8, 32.9, 38.5, 38.2, 38.4, 34.1, 34.1, 37.2, 37.2, 39.7, 40.4, 38.8, 32.4, 34.2, 29.3, 25.6, 24.3, 23.3, 22.5, 32.1, 29.9, 31.3, 28.1, 32.7, 38.6, 34.3, 30.9, 29.7, 34.1, 30.7, 30.3, 27.3, 24.1, 20.9, 22.4, 25.5, 24.9, 36.7, 37.9, 43.6, 42.3, 46.9, 48.5, 52.9, 54.4, 48.4, 52.2, 52.2, 63.8, 72.9, 71.9, 79.8, 72.1, 64.8, 69.7, 61.3, 60.1, 63.7, 48.1, 49.0, 58.6, 64.6, 76.2, 79.9, 79.3, 75.7, 83.6, 86.1, 87.4, 87.7, 84.4, 83.8, 81.5, 80.4, 80.2, 80.0, 78.9, 78.3, 76.9, 77.0, 75.4, 74.2, 73.9, 73.7, 74.6, 75.0, 70.7, 70.2, 70.6, 69.8, 69.2, 68.2, 53.3, 46.6, 46.3, 51.0, 46.8, 48.1, 45.1, 52.5, 54.1, 57.9, 48.1, 48.3, 46.6, 49.0, 46.7, 38.8, 41.8, 39.6, 32.3, 33.9, 33.5, 34.1, 37.7, 43.5, 37.2, 43.8, 41.9, 41.9, 41.0, 32.4, 30.6, 30.7, 28.7, 27.8, 25.1, 22.4, 15.3, 22.3, 24.1, 22.6, 21.2, 25.3, 26.3, 25.3, 26.0, 19.8, 20.2, 19.6, 20.6, 12.0, 12.1, 11.3, 11.8, 16.9, 17.3, 21.2, 41.1, 32.4, 32.4, 27.1, 24.0, 18.5, 22.4, 16.1, 13.9, 14.6, 14.4, 14.4, 18.6, 20.8, 25.7, 12.6, 10.7, 10.8, 11.8, 10.7, 16.2, 32.7, 24.4, 17.0, 15.0, 16.3, 18.1, 16.0, 10.2, 10.7, 12.1, 15.4, 13.4, 11.4, 11.2, 12.5, 15.3, 14.7, 20.5, 13.7, 15.4, 18.7, 19.4, 21.0, 19.6, 17.5, 24.6, 22.6, 32.6, 53.1, 49.2, 50.4, 41.9, 49.4, 46.1, 39.9, 39.2, 43.4, 36.8, 27.6, 19.8, 23.5, 21.5, 30.8, 40.2, 48.8, 55.1, 48.0, 54.5, 56.9, 47.8, 46.7, 48.4, 55.1, 53.7, 59.3, 64.3, 61.5, 64.2, 64.0, 59.3, 53.1, 43.1, 36.7, 39.4, 34.3, 29.3, 25.0, 21.2, 28.3, 29.8, 23.8, 16.5, 24.9, 27.8, 33.2, 39.1, 34.0, 21.0, 16.7, 12.0, 12.0, 13.7, 14.7, 12.8, 13.3, 13.1, 12.6, 11.2, 14.1, 13.9, 9.7, 12.1, 14.7, 19.3, 12.5, 12.6],
            sp500: []
        };
        
        // Tab switching
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                tab.classList.add('active');
                document.getElementById('tab-' + tab.dataset.tab).classList.add('active');
            });
        });
        
        // Period selector
        document.getElementById('periodSelect').addEventListener('change', (e) => {
            renderChart(parseInt(e.target.value));
        });
        
        function renderChart(days) {
            const endIdx = CHART_DATA.dates.length;
            const startIdx = Math.max(0, endIdx - days);
            const dates = CHART_DATA.dates.slice(startIdx);
            const values = CHART_DATA.values.slice(startIdx);
            const sp500 = CHART_DATA.sp500.slice(startIdx);
            
            // Recalculate S&P returns from period start
            const sp500Base = sp500[0] || 0;
            const sp500Adjusted = sp500.map(v => v - sp500Base);
            
            // Filter events for this period
            const startDate = dates[0];
            const endDate = dates[dates.length - 1];
            const visibleEvents = MARKET_EVENTS.filter(e => e.date >= startDate && e.date <= endDate);
            
            // Build shapes for regime bands and event lines
            const shapes = [
                { type: 'rect', xref: 'paper', x0: 0, x1: 1, y0: 0, y1: 30, fillcolor: '#10b981', opacity: 0.08, line: { width: 0 }, yref: 'y' },
                { type: 'rect', xref: 'paper', x0: 0, x1: 1, y0: 30, y1: 50, fillcolor: '#f59e0b', opacity: 0.08, line: { width: 0 }, yref: 'y' },
                { type: 'rect', xref: 'paper', x0: 0, x1: 1, y0: 50, y1: 70, fillcolor: '#f97316', opacity: 0.08, line: { width: 0 }, yref: 'y' },
                { type: 'rect', xref: 'paper', x0: 0, x1: 1, y0: 70, y1: 100, fillcolor: '#ef4444', opacity: 0.08, line: { width: 0 }, yref: 'y' },
                { type: 'line', xref: 'paper', x0: 0, x1: 1, y0: 30, y1: 30, line: { color: '#475569', width: 1, dash: 'dot' }, yref: 'y' },
                { type: 'line', xref: 'paper', x0: 0, x1: 1, y0: 50, y1: 50, line: { color: '#475569', width: 1, dash: 'dot' }, yref: 'y' },
                { type: 'line', xref: 'paper', x0: 0, x1: 1, y0: 70, y1: 70, line: { color: '#475569', width: 1, dash: 'dot' }, yref: 'y' },
            ];
            
            visibleEvents.forEach(e => {
                shapes.push({
                    type: 'line', x0: e.date, x1: e.date, y0: 0, y1: 1, yref: 'paper',
                    line: { color: e.color, width: 1.5, dash: 'dash' }
                });
            });
            
            // Stress score trace
            const traceStress = {
                x: dates, y: values,
                type: 'scatter', mode: 'lines',
                line: { color: '#3b82f6', width: 2 },
                fill: 'tozeroy', fillcolor: 'rgba(59, 130, 246, 0.1)',
                name: 'Stress Score',
                yaxis: 'y',
                hovertemplate: 'Stress: %{y:.1f}<extra></extra>',
            };
            
            // S&P 500 return trace (secondary axis, inverted)
            const traceSP500 = {
                x: dates, y: sp500Adjusted,
                type: 'scatter', mode: 'lines',
                line: { color: '#a855f7', width: 1.5, dash: 'dot' },
                name: 'S&P 500 Return',
                yaxis: 'y2',
                hovertemplate: 'S&P: %{y:+.1f}%<extra></extra>',
            };
            
            // Calculate y2 range (inverted so drops appear as rises)
            const minSP = Math.min(...sp500Adjusted);
            const maxSP = Math.max(...sp500Adjusted);
            const spPadding = Math.max(5, (maxSP - minSP) * 0.1);
            
            const layout = {
                paper_bgcolor: 'transparent', plot_bgcolor: 'transparent',
                margin: { t: 10, r: 60, b: 40, l: 50 },
                xaxis: { showgrid: true, gridcolor: '#1e293b', color: '#64748b', tickfont: { size: 10 }, tickformat: '%b %d' },
                yaxis: { 
                    showgrid: true, gridcolor: '#1e293b', color: '#3b82f6', tickfont: { size: 10, color: '#3b82f6' }, 
                    range: [0, 100], dtick: 25, title: { text: 'Stress Score', font: { size: 11, color: '#3b82f6' } },
                    side: 'left'
                },
                yaxis2: {
                    overlaying: 'y', side: 'right',
                    showgrid: false, color: '#a855f7', tickfont: { size: 10, color: '#a855f7' },
                    range: [maxSP + spPadding, minSP - spPadding],  // Inverted
                    ticksuffix: '%',
                    title: { text: 'S&P 500 Return', font: { size: 11, color: '#a855f7' } }
                },
                shapes: shapes,
                hovermode: 'x unified',
                showlegend: true,
                legend: { orientation: 'h', x: 0.5, xanchor: 'center', y: 1.02, font: { size: 10, color: '#94a3b8' } },
            };
            
            Plotly.newPlot('chart', [traceStress, traceSP500], layout, { displayModeBar: false, responsive: true });
            
            // Update event legend
            const legendEl = document.getElementById('eventLegend');
            if (visibleEvents.length > 0) {
                legendEl.innerHTML = visibleEvents.map(e => {
                    const dateStr = new Date(e.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                    return '<div class="event-item"><div class="event-bar" style="background: ' + e.color + ';"></div><span class="event-date">' + dateStr + '</span><span class="event-label">' + e.label + '</span></div>';
                }).join('');
            } else {
                legendEl.innerHTML = '';
            }
        }
        
        // Initialize chart
        renderChart(365);
    </script>
    
    <script>
        const HASH = "6c2a0686c2c95dd78a8187b9e2dcfed6340e42a3477952666326cfbc7a6eecbc";
        async function sha256(text) {
            const encoder = new TextEncoder();
            const data = encoder.encode(text);
            const hashBuffer = await crypto.subtle.digest("SHA-256", data);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            return hashArray.map(b => b.toString(16).padStart(2, "0")).join("");
        }
        async function checkAuth() {
            const stored = sessionStorage.getItem("dashboard_auth");
            if (stored === HASH) showDashboard();
        }
        function showDashboard() {
            document.getElementById("loginOverlay").classList.add("hidden");
            document.getElementById("dashboardContent").classList.add("visible");
        }
        async function handleLogin() {
            const password = document.getElementById("passwordInput").value;
            const hash = await sha256(password);
            if (hash === HASH) {
                sessionStorage.setItem("dashboard_auth", hash);
                showDashboard();
            } else {
                document.getElementById("loginError").style.display = "block";
                document.getElementById("passwordInput").value = "";
            }
        }
        document.getElementById("loginButton").addEventListener("click", handleLogin);
        document.getElementById("passwordInput").addEventListener("keypress", (e) => {
            if (e.key === "Enter") handleLogin();
        });
        checkAuth();
    </script>
    
</body>
</html>