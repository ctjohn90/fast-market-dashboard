<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fast Market Dashboard Testing</title>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #0f172a;
            color: #e2e8f0;
            min-height: 100vh;
            padding: 1.5rem;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 1rem;
            border-bottom: 1px solid #334155;
            margin-bottom: 1rem;
        }
        
        .header-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #f1f5f9;
        }
        
        .header-subtitle {
            color: #64748b;
            font-size: 0.75rem;
            margin-top: 0.25rem;
        }
        
        .header-meta {
            color: #64748b;
            font-size: 0.7rem;
            text-align: right;
        }
        
        /* Regime Header */
        .regime-header {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border: 1px solid #334155;
            border-left: 4px solid #10b981;
            border-radius: 8px;
            padding: 1.5rem 2rem;
            margin-bottom: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .regime-label-small {
            color: #94a3b8;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }
        
        .regime-score-row {
            display: flex;
            align-items: baseline;
            gap: 1rem;
            margin-top: 0.25rem;
        }
        
        .regime-score {
            font-size: 3.5rem;
            font-weight: 700;
            color: #10b981;
            font-family: 'SF Mono', 'Consolas', monospace;
            line-height: 1;
        }
        
        .regime-delta {
            font-size: 1.25rem;
            color: #ef4444;
            font-family: 'SF Mono', 'Consolas', monospace;
        }
        
        .regime-badge {
            background: #10b98122;
            border: 1px solid #10b981;
            color: #10b981;
            padding: 0.5rem 1.5rem;
            border-radius: 4px;
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .regime-action {
            color: #94a3b8;
            font-size: 0.8rem;
            margin-top: 0.5rem;
            text-align: right;
        }
        
        .regime-footer {
            color: #64748b;
            font-size: 0.7rem;
            margin-top: 1rem;
            border-top: 1px solid #334155;
            padding-top: 0.75rem;
        }
        
        /* Grid Layout */
        .main-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .bottom-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }
        
        @media (max-width: 1024px) {
            .main-grid, .bottom-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* Cards */
        .card {
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 8px;
            padding: 1rem 1.5rem;
        }
        
        .card-title {
            color: #94a3b8;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 1rem;
        }
        
        /* Chart */
        #chart {
            height: 280px;
        }
        
        /* Alerts */
        .alert {
            border-radius: 4px;
            padding: 0.5rem 1rem;
            font-size: 0.8rem;
            margin-bottom: 0.5rem;
        }
        
        .alert-ok {
            background: #10b98122;
            border: 1px solid #10b981;
            color: #6ee7b7;
        }
        
        .alert-high {
            background: #ef444422;
            border: 1px solid #ef4444;
            color: #fca5a5;
        }
        
        .alert-elevated {
            background: #f9731622;
            border: 1px solid #f97316;
            color: #fdba74;
        }
        
        .alert-level {
            font-weight: 600;
        }
        
        /* Signal Breakdown */
        .signal-row {
            margin-bottom: 0.75rem;
        }
        
        .signal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.25rem;
        }
        
        .signal-name {
            color: #e2e8f0;
            font-size: 0.85rem;
        }
        
        .signal-weight {
            color: #64748b;
            font-size: 0.7rem;
            margin-left: 0.5rem;
        }
        
        .signal-value {
            font-family: 'SF Mono', monospace;
            font-size: 0.9rem;
            font-weight: 600;
        }
        
        .signal-bar-bg {
            background: #0f172a;
            border-radius: 2px;
            height: 6px;
            overflow: hidden;
        }
        
        .signal-bar {
            height: 100%;
            border-radius: 2px;
        }
        
        /* Current Levels */
        .level-row {
            display: flex;
            justify-content: space-between;
            padding: 0.4rem 0;
            border-bottom: 1px solid #334155;
        }
        
        .level-row:last-child {
            border-bottom: none;
        }
        
        .level-name {
            color: #94a3b8;
            font-size: 0.8rem;
        }
        
        .level-value {
            color: #e2e8f0;
            font-family: 'SF Mono', monospace;
            font-size: 0.85rem;
        }
        
        /* Login overlay styles */
        .login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #0f172a;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .login-overlay.hidden {
            display: none;
        }
        
        .login-box {
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 12px;
            padding: 32px;
            width: 100%;
            max-width: 360px;
            text-align: center;
        }
        
        .login-title {
            font-size: 18px;
            font-weight: 600;
            color: #f1f5f9;
            margin-bottom: 8px;
        }
        
        .login-subtitle {
            font-size: 13px;
            color: #64748b;
            margin-bottom: 24px;
        }
        
        .login-input {
            width: 100%;
            padding: 12px 16px;
            background: #0f172a;
            border: 1px solid #334155;
            border-radius: 8px;
            color: #e2e8f0;
            font-size: 14px;
            margin-bottom: 16px;
            outline: none;
        }
        
        .login-input:focus {
            border-color: #3b82f6;
        }
        
        .login-button {
            width: 100%;
            padding: 12px 16px;
            background: #3b82f6;
            border: none;
            border-radius: 8px;
            color: #fff;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
        }
        
        .login-button:hover {
            background: #2563eb;
        }
        
        .login-error {
            color: #ef4444;
            font-size: 13px;
            margin-top: 12px;
            display: none;
        }
        
        .dashboard-content {
            display: none;
        }
        
        .dashboard-content.visible {
            display: block;
        }
    </style>
</head>
<body>
    
    <div id="loginOverlay" class="login-overlay">
        <div class="login-box">
            <div class="login-title">Fast Market Dashboard Testing</div>
            <div class="login-subtitle">Enter password to continue</div>
            <input type="password" id="passwordInput" class="login-input" placeholder="Password" autofocus>
            <button id="loginButton" class="login-button">Access Dashboard</button>
            <div id="loginError" class="login-error">Incorrect password</div>
        </div>
    </div>
    
    
    <div class="dashboard-content" id="dashboardContent">
    <div class="container">
        <div class="header">
            <div>
                <div class="header-title">Market Stress Monitor</div>
                <div class="header-subtitle">Asset Management Risk Dashboard</div>
            </div>
            <div class="header-meta">
                Data: FRED + Yahoo Finance<br>Refresh: Daily EOD
            </div>
        </div>
        
        <div class="regime-header">
            <div>
                <div class="regime-label-small">Market Stress Level</div>
                <div class="regime-score-row">
                    <span class="regime-score">25.7</span>
                    <span class="regime-delta">+12.4 (5d)</span>
                </div>
            </div>
            <div style="text-align: right;">
                <div class="regime-badge">CALM</div>
                <div class="regime-action">Risk-on conditions</div>
            </div>
        </div>
        <div class="regime-footer">
            As of 2026-01-16 | Updated 21:12
        </div>
        
        <div class="main-grid">
            <div class="card">
                <div class="card-title">90-Day Composite History</div>
                <div id="chart"></div>
            </div>
            
            <div class="card">
                <div class="card-title">Alerts</div>
                <div class="alert alert-high"><span class="alert-level">HIGH:</span> Safe Haven (GLD/SPY) at 99th percentile</div>
            </div>
        </div>
        
        <div class="bottom-grid">
            <div class="card">
                <div class="card-title">Signal Breakdown (by contribution)</div>
                
            <div class="signal-row">
                <div class="signal-header">
                    <span class="signal-name"> VIX Term Structure <span class="signal-weight">10% wt</span></span>
                    <span class="signal-value" style="color: #fdba74">77</span>
                </div>
                <div class="signal-bar-bg">
                    <div class="signal-bar" style="width: 77.47059989613874%; background: #f97316;"></div>
                </div>
            </div>
        
            <div class="signal-row">
                <div class="signal-header">
                    <span class="signal-name">! Safe Haven (GLD/SPY) <span class="signal-weight">5% wt</span></span>
                    <span class="signal-value" style="color: #fca5a5">99</span>
                </div>
                <div class="signal-bar-bg">
                    <div class="signal-bar" style="width: 98.80478087649402%; background: #ef4444;"></div>
                </div>
            </div>
        
            <div class="signal-row">
                <div class="signal-header">
                    <span class="signal-name"> VIX <span class="signal-weight">15% wt</span></span>
                    <span class="signal-value" style="color: #6ee7b7">25</span>
                </div>
                <div class="signal-bar-bg">
                    <div class="signal-bar" style="width: 25.099601593625497%; background: #10b981;"></div>
                </div>
            </div>
        
            <div class="signal-row">
                <div class="signal-header">
                    <span class="signal-name"> Sector Correlation <span class="signal-weight">10% wt</span></span>
                    <span class="signal-value" style="color: #6ee7b7">23</span>
                </div>
                <div class="signal-bar-bg">
                    <div class="signal-bar" style="width: 23.39541611726483%; background: #10b981;"></div>
                </div>
            </div>
        
            <div class="signal-row">
                <div class="signal-header">
                    <span class="signal-name"> USD Index <span class="signal-weight">10% wt</span></span>
                    <span class="signal-value" style="color: #6ee7b7">22</span>
                </div>
                <div class="signal-bar-bg">
                    <div class="signal-bar" style="width: 21.91235059760956%; background: #10b981;"></div>
                </div>
            </div>
        
            <div class="signal-row">
                <div class="signal-header">
                    <span class="signal-name"> Defensive Rotation <span class="signal-weight">10% wt</span></span>
                    <span class="signal-value" style="color: #6ee7b7">22</span>
                </div>
                <div class="signal-bar-bg">
                    <div class="signal-bar" style="width: 21.51394422310757%; background: #10b981;"></div>
                </div>
            </div>
        
            <div class="signal-row">
                <div class="signal-header">
                    <span class="signal-name"> HY Credit Spread <span class="signal-weight">20% wt</span></span>
                    <span class="signal-value" style="color: #6ee7b7">7</span>
                </div>
                <div class="signal-bar-bg">
                    <div class="signal-bar" style="width: 6.772908366533864%; background: #10b981;"></div>
                </div>
            </div>
        
            <div class="signal-row">
                <div class="signal-header">
                    <span class="signal-name"> BBB Credit Spread <span class="signal-weight">15% wt</span></span>
                    <span class="signal-value" style="color: #6ee7b7">8</span>
                </div>
                <div class="signal-bar-bg">
                    <div class="signal-bar" style="width: 7.968127490039841%; background: #10b981;"></div>
                </div>
            </div>
        
            <div class="signal-row">
                <div class="signal-header">
                    <span class="signal-name"> S&P 500 Drawdown <span class="signal-weight">5% wt</span></span>
                    <span class="signal-value" style="color: #6ee7b7">1</span>
                </div>
                <div class="signal-bar-bg">
                    <div class="signal-bar" style="width: 1.0680395054226142%; background: #10b981;"></div>
                </div>
            </div>
        
            </div>
            
            <div class="card">
                <div class="card-title">Current Levels</div>
                
            <div class="level-row">
                <span class="level-name">HY Credit Spread</span>
                <span class="level-value">2.71%</span>
            </div>
        
            <div class="level-row">
                <span class="level-name">VIX</span>
                <span class="level-value">15.8</span>
            </div>
        
            <div class="level-row">
                <span class="level-name">BBB Credit Spread</span>
                <span class="level-value">0.97%</span>
            </div>
        
            <div class="level-row">
                <span class="level-name">USD Index</span>
                <span class="level-value">120.6</span>
            </div>
        
            <div class="level-row">
                <span class="level-name">Defensive Rotation</span>
                <span class="level-value">0.355</span>
            </div>
        
            <div class="level-row">
                <span class="level-name">Sector Correlation</span>
                <span class="level-value">0.187</span>
            </div>
        
            <div class="level-row">
                <span class="level-name">VIX Term Structure</span>
                <span class="level-value">0.835 (backwardation)</span>
            </div>
        
            <div class="level-row">
                <span class="level-name">Safe Haven (GLD/SPY)</span>
                <span class="level-value">0.609</span>
            </div>
        
            <div class="level-row">
                <span class="level-name">S&P 500 Drawdown</span>
                <span class="level-value">6940</span>
            </div>
        
            </div>
        </div>
    </div>
    </div>
    
    <script>
        const dates = ["2025-09-10", "2025-09-11", "2025-09-12", "2025-09-15", "2025-09-16", "2025-09-17", "2025-09-18", "2025-09-19", "2025-09-22", "2025-09-23", "2025-09-24", "2025-09-25", "2025-09-26", "2025-09-29", "2025-09-30", "2025-10-01", "2025-10-02", "2025-10-03", "2025-10-06", "2025-10-07", "2025-10-08", "2025-10-09", "2025-10-10", "2025-10-13", "2025-10-14", "2025-10-15", "2025-10-16", "2025-10-17", "2025-10-20", "2025-10-21", "2025-10-22", "2025-10-23", "2025-10-24", "2025-10-27", "2025-10-28", "2025-10-29", "2025-10-30", "2025-10-31", "2025-11-03", "2025-11-04", "2025-11-05", "2025-11-06", "2025-11-07", "2025-11-10", "2025-11-11", "2025-11-12", "2025-11-13", "2025-11-14", "2025-11-17", "2025-11-18", "2025-11-19", "2025-11-20", "2025-11-21", "2025-11-24", "2025-11-25", "2025-11-26", "2025-11-28", "2025-12-01", "2025-12-02", "2025-12-03", "2025-12-04", "2025-12-05", "2025-12-08", "2025-12-09", "2025-12-10", "2025-12-11", "2025-12-12", "2025-12-15", "2025-12-16", "2025-12-17", "2025-12-18", "2025-12-19", "2025-12-22", "2025-12-23", "2025-12-24", "2025-12-26", "2025-12-29", "2025-12-30", "2025-12-31", "2026-01-02", "2026-01-05", "2026-01-06", "2026-01-07", "2026-01-08", "2026-01-09", "2026-01-12", "2026-01-13", "2026-01-14", "2026-01-15", "2026-01-16"];
        const values = [19.4, 12.8, 14.3, 16.6, 20.5, 17.9, 15.7, 15.4, 17.3, 20.7, 20.1, 27.5, 19.0, 21.1, 24.8, 25.8, 29.1, 26.8, 24.5, 33.9, 31.6, 43.0, 63.2, 58.3, 60.0, 54.2, 60.9, 56.6, 49.9, 49.3, 53.0, 47.6, 36.3, 26.3, 31.2, 29.9, 40.3, 48.3, 51.4, 59.9, 55.6, 60.8, 60.1, 51.8, 50.6, 50.5, 57.2, 57.5, 63.2, 68.5, 66.6, 68.4, 68.2, 62.6, 56.0, 47.0, 38.3, 41.8, 38.3, 31.0, 27.7, 24.5, 35.7, 36.0, 29.5, 18.8, 26.2, 30.0, 34.9, 43.0, 36.2, 21.5, 15.8, 11.2, 11.0, 13.4, 14.7, 12.1, 12.8, 12.4, 11.9, 10.2, 14.3, 14.1, 10.1, 13.3, 17.9, 24.0, 16.0, 16.0];
        
        const trace = {
            x: dates,
            y: values,
            type: 'scatter',
            mode: 'lines',
            line: { color: '#3b82f6', width: 2 },
            fill: 'tozeroy',
            fillcolor: 'rgba(59, 130, 246, 0.1)',
            hovertemplate: '%{x|%b %d, %Y}<br>Score: %{y:.1f}<extra></extra>',
        };
        
        const layout = {
            paper_bgcolor: 'transparent',
            plot_bgcolor: 'transparent',
            margin: { t: 10, r: 10, b: 40, l: 40 },
            xaxis: {
                showgrid: true,
                gridcolor: '#1e293b',
                color: '#64748b',
                tickfont: { size: 10 },
                tickformat: '%b %d',
            },
            yaxis: {
                showgrid: true,
                gridcolor: '#1e293b',
                color: '#64748b',
                tickfont: { size: 10 },
                range: [0, 100],
                dtick: 25,
            },
            shapes: [
                // Regime bands
                { type: 'rect', xref: 'paper', x0: 0, x1: 1, y0: 0, y1: 30, fillcolor: '#10b981', opacity: 0.08, line: { width: 0 } },
                { type: 'rect', xref: 'paper', x0: 0, x1: 1, y0: 30, y1: 50, fillcolor: '#f59e0b', opacity: 0.08, line: { width: 0 } },
                { type: 'rect', xref: 'paper', x0: 0, x1: 1, y0: 50, y1: 70, fillcolor: '#f97316', opacity: 0.08, line: { width: 0 } },
                { type: 'rect', xref: 'paper', x0: 0, x1: 1, y0: 70, y1: 100, fillcolor: '#ef4444', opacity: 0.08, line: { width: 0 } },
                // Threshold lines
                { type: 'line', xref: 'paper', x0: 0, x1: 1, y0: 30, y1: 30, line: { color: '#475569', width: 1, dash: 'dot' } },
                { type: 'line', xref: 'paper', x0: 0, x1: 1, y0: 50, y1: 50, line: { color: '#475569', width: 1, dash: 'dot' } },
                { type: 'line', xref: 'paper', x0: 0, x1: 1, y0: 70, y1: 70, line: { color: '#475569', width: 1, dash: 'dot' } },
            ],
            hovermode: 'x unified',
        };
        
        const config = { displayModeBar: false, responsive: true };
        
        Plotly.newPlot('chart', [trace], layout, config);
    </script>
    
    <script>
        const HASH = "a36c1564c88c9b3e5f7b035139ea8ac3d2adc544d72f4f5562c79c177bf12c75";
        
        async function sha256(text) {
            const encoder = new TextEncoder();
            const data = encoder.encode(text);
            const hashBuffer = await crypto.subtle.digest("SHA-256", data);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            return hashArray.map(b => b.toString(16).padStart(2, "0")).join("");
        }
        
        async function checkAuth() {
            const stored = sessionStorage.getItem("dashboard_auth");
            if (stored === HASH) {
                showDashboard();
            }
        }
        
        function showDashboard() {
            document.getElementById("loginOverlay").classList.add("hidden");
            document.getElementById("dashboardContent").classList.add("visible");
        }
        
        async function handleLogin() {
            const password = document.getElementById("passwordInput").value;
            const hash = await sha256(password);
            
            if (hash === HASH) {
                sessionStorage.setItem("dashboard_auth", hash);
                showDashboard();
            } else {
                document.getElementById("loginError").style.display = "block";
                document.getElementById("passwordInput").value = "";
            }
        }
        
        document.getElementById("loginButton").addEventListener("click", handleLogin);
        document.getElementById("passwordInput").addEventListener("keypress", (e) => {
            if (e.key === "Enter") handleLogin();
        });
        
        checkAuth();
    </script>
    
</body>
</html>